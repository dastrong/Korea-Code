<% include ../partials/header %>
<div class="container">
  <div id="form">
    <div id="formHeader">
      <h1>Edit Your Profile</h1>
    </div>
    <div id="formBody">
      <form method="POST" action="/profile/<%= user._id %>?_method=PUT">
        <div class="form-group">
          <input class="form-control" type="text" name="name" value="<%= user.name %>" maxlength="30" required>
        </div>
        <div class="form-group">
          <input class="form-control" type="email" name="email" value="<%= user.email %>" maxlength="254" required>
        </div>
        <div class="form-group">
          <input id="imgInput" class="form-control" type="text" name="image" placeholder="image URL" maxlength="222">
        </div>
        <div class="form-group">
          <textarea id="bioTextArea" class="form-control" name="bio" rows="5" placeholder="Tell us about your background" maxlength="140"></textarea>
        </div>
        <div class="form-group">
          <button class="btn btn-lg btn-primary btn-block">Update Profile</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!--ADD VALUE TO IMG INPUT AND BIO TEXTAREA-->
<script>
  if(`<%= user.image %>`){
    let img = `<%= user.image %>`;
    let imgDoc = new DOMParser().parseFromString(img, 'text/html');
    document.getElementById("imgInput").value = imgDoc.body.innerText;
  }
  if(`<%= user.bio %>`){
    let bio = `<%= user.bio %>`;
    let bioDoc = new DOMParser().parseFromString(bio, 'text/html');
    document.getElementById("bioTextArea").value = bioDoc.body.innerText;
  }
</script>
<% include ../partials/footer %>
<% include ../partials/closingTags %>